language: python
python:
  - 2.7

sudo: false
addons:
  apt:
    packages:
      - doxygen
      - doxygen-doc
      - doxygen-gui
      - doxygen-latex
      - graphviz

install: pip install -r docs/requirements.txt
script:
  - cd docs
  - doxygen
  - make html
  - cd ..
  - git checkout --orphan gh-pages
  - git rm -rf .
  - rm -rf scripts
  - mv docs/_build/html/* .
  - rm -rf docs
  - git add .
  - git commit -m "built docs"

deploy:
  provider: pages
  skip_cleanup: true
  github_token: $GITHUB_TOKEN
